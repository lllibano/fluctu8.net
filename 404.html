<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FLUCTU8</title>
    
    <meta name="apple-itunes-app" content="app-id=, app-argument=">

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f2f2f7;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-width: 90%;
            width: 400px;
        }
        h1 { font-size: 24px; margin-bottom: 10px; }
        p { color: #666; margin-bottom: 30px; }
        
        .btn {
            display: block;
            width: 100%;
            padding: 15px 0;
            margin-bottom: 15px;
            text-decoration: none;
            border-radius: 12px;
            font-weight: bold;
            font-size: 18px;
            box-sizing: border-box; /* Ensures padding doesn't increase width */
        }

        .btn-primary {
            background-color: #007AFF;
            color: white;
        }

        .btn-secondary {
            background-color: #f2f2f7;
            color: #007AFF;
        }
    </style>

    <script>
        // ==========================================
        // CONFIGURATION: APP IDS GO HERE
        // ==========================================
        const CLIENT_CONFIG = {
            "velvet": {
                name: "VELVET",
                scheme: "fluctu8-velvet",
                appStoreId: "123456789" // <--- REPLACE LATER
            },
            "te2hospitality": {
                name: "TE2 Hospitality",
                scheme: "fluctu8-te2hospitality",
                appStoreId: "987654321" // <--- REPLACE LATER
            },
            "default": {
                name: "FLUCTU8",
                scheme: "fluctu8", // Fallback scheme
                appStoreId: "" 
            }
        };

        window.onload = function() {
            var path = window.location.pathname; // e.g. "/velvet/event/123"
            var universalLink = "https://fluctu8.net" + path;
            
            // 1. DETERMINE CLIENT
            var clientKey = "default";
            
            // Check keys in config to see if URL contains them
            for (var key in CLIENT_CONFIG) {
                if (key !== "default" && path.includes("/" + key + "/")) {
                    clientKey = key;
                    break;
                }
            }
            
            var config = CLIENT_CONFIG[clientKey];

            // 2. UPDATE UI TEXT
            document.querySelector('h1').innerText = "Ver em " + config.name;

            // 3. CONSTRUCT CUSTOM SCHEME LINK (For "Open App" button)
            // Result: "fluctu8-velvet:/velvet/event/123"
            var customSchemeLink = config.scheme + ":/" + path;
            var openBtn = document.getElementById('open-btn');
            openBtn.href = customSchemeLink;

            // 4. CONSTRUCT APP STORE LINK (For "Download" button)
            var downloadBtn = document.getElementById('download-btn');
            if (config.appStoreId) {
                var storeUrl = "https://apps.apple.com/app/id" + config.appStoreId;
                downloadBtn.href = storeUrl;
            } else {
                // If no ID yet, hide the download button or point to homepage
                downloadBtn.style.display = "none"; 
            }

            // 5. UPDATE SMART BANNER META TAG
            // This attempts to trigger the native iOS banner at the top
            var meta = document.querySelector('meta[name="apple-itunes-app"]');
            if (meta && config.appStoreId) {
                var content = "app-id=" + config.appStoreId + ", app-argument=" + universalLink;
                meta.setAttribute('content', content);
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Ver no App</h1>
        
        <a id="open-btn" href="#" class="btn btn-primary">Abrir App</a>
        
        <a id="download-btn" href="#" class="btn btn-secondary">Download na App Store</a>
    </div>
</body>
</html>
