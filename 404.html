<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FLUCTU8</title>
    
    <meta name="apple-itunes-app" content="app-id=YOUR_APP_STORE_ID, app-argument=https://fluctu8.net">

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f2f2f7;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-width: 80%;
        }
        h1 { font-size: 24px; margin-bottom: 10px; }
        p { color: #666; margin-bottom: 30px; }
        .btn {
            background-color: #007AFF;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 12px;
            font-weight: bold;
            font-size: 18px;
            display: inline-block;
        }
    </style>

    <script>
        window.onload = function() {
            var path = window.location.pathname; // e.g. "/velvet/event/123"
            var universalLink = "https://fluctu8.net" + path;
            
            // 1. DETERMINE SCHEME BASED ON PATH PREFIX
            var customSchemePrefix = "fluctu8-velvet"; // Default
            
            if (path.includes("/te2hospitality/")) {
                customSchemePrefix = "fluctu8-te2";
            } 
            // Add more else-ifs here for future clients
            // else if (path.includes("/client-c/")) { ... }

            // 2. CONSTRUCT THE LINK
            // Result: "fluctu8-velvet://velvet/event/123"
            // Note: We strip the leading slash from path to avoid double slashes if desired, 
            // but "fluctu8-velvet://velvet/..." is safer than "fluctu8-velvet:///velvet..."
            var customSchemeLink = customSchemePrefix + ":/" + path;

            // 3. UPDATE SMART BANNER (Apple Native)
            var meta = document.querySelector('meta[name="apple-itunes-app"]');
            if (meta) {
                // Ideally, you'd also dynamically switch the 'app-id' here if you want 
                // the native Safari banner to match the specific app.
                // But for now, let's just fix the argument.
                var content = meta.getAttribute('content');
                meta.setAttribute('content', content.replace('app-argument=https://fluctu8.net', 'app-argument=' + universalLink));
            }

            // 4. UPDATE THE BLUE BUTTON
            var btn = document.getElementById('open-btn');
            btn.href = customSchemeLink;
            
            // Update text to be specific
            if (path.includes("/te2hospitality/")) {
                document.querySelector('h1').innerText = "Open TE2 Hospitality";
            } else {
                document.querySelector('h1').innerText = "Open Velvet";
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>View in App</h1>
        <p>This content is best viewed in the Velvet app.</p>
        <a id="open-btn" href="#" class="btn">Open App</a>
    </div>
</body>
</html>
